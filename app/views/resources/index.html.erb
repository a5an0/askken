<script type="text/javascript">
  $(function() {
    var canvas = document.getElementById("kenviz");
    var p = Processing(canvas);
    
    var initialized = false;
    
    var search = $("#fb-suggest");
    search.suggest()
    .bind("fb-select", function(e, data) {
       p.resourceId = data.id;
       if (!initialized) {
         p.init(p.ajax("/javascripts/pjs/physics.pjs")+p.ajax("/javascripts/pjs/value.pjs")+p.ajax("/javascripts/pjs/attribute.pjs")+p.ajax("/javascripts/pjs/resource.pjs")+p.ajax("/javascripts/pjs/node.pjs")+p.ajax("/javascripts/pjs/edge.pjs")+p.ajax("/javascripts/pjs/graph.pjs")+p.ajax("/javascripts/pjs/network.pjs"));
         initialized = true;
       } else {
         p.setup();
       }
    })
    .focus(function(e) {
      if ($(this).val() == $(this).attr('default')) {
        $(this).val("");
      }
      else {
        $(this).select();
      }
      $(this).removeClass('ghost-input');
    })
    .blur(function(e) {
      if (!$(this).val()) {
        $(this).val($(this).attr('default')).addClass('ghost-input');
      }
    });
      
    search.val(search.attr('default')).addClass('ghost-input');
    
    // init
    p.resourceId = null; // "/en/new_order";
    p.init(p.ajax("/javascripts/pjs/physics.pjs")+p.ajax("/javascripts/pjs/value.pjs")+p.ajax("/javascripts/pjs/attribute.pjs")+p.ajax("/javascripts/pjs/resource.pjs")+p.ajax("/javascripts/pjs/node.pjs")+p.ajax("/javascripts/pjs/edge.pjs")+p.ajax("/javascripts/pjs/graph.pjs")+p.ajax("/javascripts/pjs/network.pjs"));
    initialized = true;
        
    $(window).resize(function(){
      p.resize();
    });
  });
</script>

<canvas id="kenviz"></canvas>
<script src="http://static.getclicky.com/90161.js" type="text/javascript"></script>
<noscript><p><img alt="Clicky" width="1" height="1" src="http://static.getclicky.com/90161-db11.gif" /></p></noscript>